% Copyright (C) 2008-2014 EDF R&D

% This file is part of Sim-Diasca - Smart City simulator.

% Sim-Diasca is free software: you can redistribute it and/or modify
% it under the terms of the GNU Lesser General Public License as
% published by the Free Software Foundation, either version 3 of
% the License, or (at your option) any later version.

% Sim-Diasca is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
% GNU Lesser General Public License for more details.

% You should have received a copy of the GNU Lesser General Public
% License along with Sim-Diasca.
% If not, see <http://www.gnu.org/licenses/>.

% Author: Olivier Boudeville (olivier.boudeville@edf.fr)


% Integration test for the smart-city simulator
%
% See also:
%
% - class_Car.erl
% - class_Sensor.erl
% - class_Route.erl
%
-module(smart_city_car_route_test).



% For all facilities common to all tests:
-include("test_constructs.hrl").



% Runs the test.
%
-spec run() -> no_return().
run() ->

	?test_start,

	% Use default simulation settings (50Hz, batch reproducible):
	SimulationSettings = #simulation_settings{

	  simulation_name = "Sim-Diasca Smart City Integration Test",

	  % Using 100Hz here:
	  tick_duration = 0.01

	  % We leave it to the default specification (all_outputs):
	  % result_specification =
	  %  [ { targeted_patterns, [ {".*",[data_and_plot]} ] },
	  %    { blacklisted_patterns, ["^Second" ] } ]

	  %result_specification = [ { targeted_patterns, [ {".*",data_only} ] } ]

	},


	DeploymentSettings = #deployment_settings{

		computing_hosts = { use_host_file_otherwise_local,
							"sim-diasca-host-candidates.txt" },

		%node_availability_tolerance = fail_on_unavailable_node,

		% We want to embed additionally this test and its specific
		% prerequisites, defined in the Mock Simulators:
		%
		additional_elements_to_deploy = [ { ".", code } ],

		% Note that the configuration file below has not to be declared above as
		% well:
		enable_data_exchanger = { true, [ "soda_parameters.cfg" ] },

		enable_performance_tracker = false

	},


	% Default load balancing settings (round-robin placement heuristic):
	LoadBalancingSettings = #load_balancing_settings{},

	% A deployment manager is created directly on the user node:
	DeploymentManagerPid = sim_diasca:init( SimulationSettings,
							   DeploymentSettings, LoadBalancingSettings ),

	% FIrst Sensor
	_SVM1 = class_Actor:create_initial_actor( class_Sensor,
		[ _SensorName="sensor_1", _SensorLat=10.0, _SensorLong=10.0,
		 _InitialValue=20.0, _GenerateDataInterval=10.0 ] ),

	% First Route
	SVM1 = class_Actor:create_initial_actor( class_Route,
		[ _RouteaName="Route 1", _Route=[{44.81813320670734,10.296764373779297},{44.81801,10.29751},{44.81787437512889,10.2974656234344},{44.81773875024058,10.297421247077557},{44.8176031253351,10.297376870929465},{44.81746750041242,10.297332494990128},{44.81733187547256,10.29728811925954},{44.817196250515515,10.297243743737697},{44.81706062554129,10.297199368424604},{44.81692500054987,10.297154993320252},{44.816789375541276,10.297110618424643},{44.816653750515506,10.297066243737776},{44.81651812547255,10.297021869259645},{44.816382500412395,10.296977494990252},{44.81624687533506,10.296933120929594},{44.81611125024056,10.296888747077666},{44.81597562512887,10.296844373434467},{44.81584,10.2968},{44.81584,10.2968},{44.815815000018425,10.296865000028179},{44.81579,10.29693},{44.81573000000393,10.296960000031214},{44.81567,10.29699},{44.81562500000042,10.296979999992198},{44.81558,10.29697},{44.815577500129045,10.297035000019726},{44.815575000221216,10.297100000033815},{44.81557250027652,10.297165000042268},{44.81557000029495,10.297230000045086},{44.81556750027652,10.29729500004227},{44.81556500022122,10.297360000033816},{44.81556250012905,10.297425000019727},{44.81556,10.29749},{44.815525000052794,10.297600000066764},{44.81549,10.29771},{44.81545125014767,10.297757500478776},{44.81541250027564,10.297805000893717},{44.81537375038393,10.29785250124482},{44.81533500047253,10.297900001532087},{44.81529625054144,10.297947501755514},{44.81525750059066,10.297995001915107},{44.8152187506202,10.298042502010858},{44.81518000063004,10.298090002042775},{44.8151412506202,10.298137502010857},{44.81510250059066,10.298185001915101},{44.81506375054144,10.298232501755509},{44.81502500047253,10.298280001532078},{44.81498625038394,10.298327501244811},{44.81494750027564,10.29837500089371},{44.814908750147666,10.298422500478774},{44.81487,10.29847},{44.81483000015505,10.298541250345952},{44.81479000026579,10.298612500593057},{44.81475000033224,10.298683750741322},{44.814710000354395,10.298755000790742},{44.81467000033225,10.29882625074132},{44.8146300002658,10.298897500593055},{44.81459000015505,10.29896875034595},{44.81455,10.29904},{44.81453625011457,10.299101250102225},{44.81452250019642,10.299162500175246},{44.81450875024553,10.299223750219062},{44.8144950002619,10.299285000233665},{44.814481250245535,10.299346250219061},{44.81446750019642,10.29940750017525},{44.81445375011457,10.299468750102228},{44.81444,10.29953},{44.81443312550109,10.299617500156469},{44.81442625093538,10.299705000292077},{44.81441937630284,10.29979250040682},{44.81441250160349,10.299880000500703},{44.81440562683732,10.299967500573722},{44.81439875200435,10.300055000625882},{44.81439187710457,10.300142500657179},{44.81438500213798,10.300230000667613},{44.81437812710457,10.300317500657185},{44.81437125200435,10.300405000625892},{44.814364376837325,10.300492500573736},{44.81435750160348,10.300580000500714},{44.81435062630282,10.300667500406831},{44.81434375093536,10.300755000292083},{44.81433687550108,10.300842500156474},{44.81433,10.30093},{44.81433250016612,10.301003749977623},{44.81433500028477,10.301077499961636},{44.81433750035597,10.301151249952044},{44.8143400003797,10.301224999948847},{44.81434250035598,10.301298749952045},{44.814345000284774,10.301372499961635},{44.81434750016612,10.301446249977621},{44.81435,10.30152},{44.8143700000688,10.301592499924569},{44.81439000009173,10.301664999899424},{44.8144100000688,10.301737499924569},{44.81443,10.30181},{44.81437,10.30188},{44.81437,10.30196},{44.81442,10.30204},{44.81447,10.30204},{44.81445437550109,10.302127500355615},{44.81443875093537,10.302215000663812},{44.814423126302835,10.302302500924599},{44.81440750160348,10.302390001137969},{44.81439187683733,10.302477501303924},{44.81437625200436,10.302565001422465},{44.81436062710458,10.302652501493592},{44.81434500213798,10.3027400015173},{44.81432937710457,10.302827501493596},{44.81431375200435,10.302915001422473},{44.81429812683733,10.303002501303935},{44.81428250160348,10.30309000113798},{44.81426687630283,10.30317750092461},{44.81425125093537,10.303265000663822},{44.81423562550109,10.30335250035562},{44.81422,10.30344},{44.81421312542545,10.30352062514417},{44.81420625079416,10.303601250269123},{44.814199376106146,10.303681875374851},{44.81419250136141,10.303762500461357},{44.814185626559954,10.30384312552864},{44.81417875170176,10.3039237505767},{44.81417187678685,10.304004375605537},{44.81416500181521,10.304085000615151},{44.81415812678686,10.30416562560554},{44.81415125170175,10.304246250576705},{44.81414437655994,10.30432687552865},{44.81413750136141,10.304407500461366},{44.81413062610615,10.30448812537486},{44.81412375079416,10.304568750269132},{44.81411687542545,10.304649375144178},{44.81411,10.30473},{44.81411250215008,10.304911249882105},{44.814115004013495,10.30509249977994},{44.81411750559022,10.305273749693503},{44.81412000688027,10.305454999622786},{44.81412250788365,10.30563624956779},{44.81412500860035,10.305817499528517},{44.81412750903036,10.305998749504965},{44.814130009173695,10.306179999497125},{44.814132509030365,10.306361249505},{44.814135008600346,10.30654249952859},{44.81413750788365,10.306723749567889},{44.81414000688028,10.3069049996229},{44.81414250559022,10.307086249693619},{44.81414500401349,10.30726749978004},{44.81414750215008,10.30744874988217},{44.81415,10.30763},{44.81416375016054,10.307702499878998},{44.8141775002752,10.307774999792567},{44.814191250344,10.307847499740708},{44.81420500036694,10.307919999723422},{44.814218750344004,10.307992499740708},{44.8142325002752,10.308064999792567},{44.81424625016053,10.308137499879},{44.81426,10.30821},{44.81423500001843,10.308275000028178},{44.81421,10.30834},{44.81424,10.30845},{44.81429,10.30849},{44.81428875019547,10.308570000012143},{44.8142875003351,10.308650000020812},{44.814286250418874,10.308730000026012},{44.814285000446795,10.308810000027748},{44.814283750418866,10.308890000026013},{44.81428250033509,10.30897000002081},{44.81428125019547,10.30905000001214},{44.81428,10.30913},{44.81431500492704,10.309404372502033},{44.81435000919715,10.309678745337155},{44.81438501281033,10.30995311850536},{44.81442001576656,10.31022749200664},{44.81445501806587,10.310501865840992},{44.81449001970823,10.310776240008408},{44.814525020693665,10.311050614508888},{44.814560021022146,10.311324989342419},{44.814595020693694,10.311599364508998},{44.8146300197083,10.311873740008627},{44.81466501806595,10.31214811584129},{44.81470001576667,10.312422492006988},{44.81473501281043,10.312696868505714},{44.81477000919723,10.31297124533746},{44.814805004927095,10.313245622502226},{44.81484,10.31352},{44.81483000015127,10.313627500055924},{44.814820000201685,10.313735000074567},{44.81481000015126,10.313842500055925},{44.8148,10.31395},{44.814780000073625,10.314025000078033},{44.814760000098175,10.314100000104043},{44.814740000073634,10.314175000078034},{44.81472,10.31425},{44.81472,10.31425},{44.814686250061854,10.314295000184352},{44.81465250010603,10.314340000316031},{44.81461875013253,10.314385000395042},{44.81458500014136,10.314430000421378},{44.81455125013253,10.314475000395042},{44.81451750010603,10.314520000316033},{44.814483750061854,10.314565000184352},{44.81445,10.31461},{44.81445,10.31461},{44.81437375010995,10.31467000055533},{44.814297500188495,10.314730000951991},{44.81422125023561,10.314790001189989},{44.81414500025132,10.314850001269319},{44.81406875023561,10.314910001189986},{44.81399250018848,10.314970000951986},{44.81391625010995,10.315030000555325},{44.81384,10.31509},{44.81384,10.31509},{44.813743750006545,10.315079999749655},{44.813647500012216,10.315069999532689},{44.813551250017014,10.315059999349101},{44.813455000020944,10.315049999198896},{44.813358750023994,10.315039999082071},{44.81326250002618,10.315029998998625},{44.81316625002748,10.315019998948559},{44.81307000002793,10.31500999893187},{44.81297375002749,10.314999998948561},{44.812877500026175,10.314989998998632},{44.81278125002401,10.314979999082082},{44.812685000020956,10.31496999919891},{44.81258875001703,10.314959999349117},{44.812492500012226,10.3149499995327},{44.81239625000656,10.314939999749663},{44.8123,10.31493},{44.8123,10.31493},{44.8122512545529,10.31519375334407},{44.812202508498736,10.31545750624228},{44.81215376183751,10.315721258694632},{44.81210501456921,10.315985010701118},{44.81205626669387,10.316248762261736},{44.812007518211466,10.316512513376479},{44.81195876912203,10.316776264045345},{44.81191001942553,10.317040014268327},{44.81186126912198,10.317303764045427},{44.81181251821138,10.317567513376638},{44.81176376669375,10.317831262261954},{44.81171501456908,10.318095010701374},{44.81166626183737,10.318358758694892},{44.81161750849862,10.318622506242507},{44.81156875455283,10.318886253344209},{44.81152,10.31915},{44.81152,10.31915},{44.81141625069604,10.319253127782643},{44.81131250129927,10.319356255194254},{44.8112087518097,10.319459382234836},{44.81110500222731,10.319562508904395},{44.811001252552124,10.319665635202933},{44.810897502784115,10.31976876113045},{44.81079375292332,10.319871886686947},{44.810690002969714,10.319975011872428},{44.8105862529233,10.320078136686899},{44.81048250278409,10.320181261130354},{44.810378752552076,10.320284385202804},{44.810275002227264,10.320387508904247},{44.810171251809656,10.320490632234684},{44.81006750129924,10.320593755194121},{44.80996375069602,10.320696877782558},{44.80986,10.3208},{44.80986,10.3208},{44.80981250015158,10.320848125594491},{44.809765000282944,10.320896251109719},{44.8097175003941,10.32094437654568},{44.809670000485056,10.320992501902374},{44.80962250055579,10.321040627179801},{44.80957500060631,10.321088752377964},{44.809527500636634,10.321136877496862},{44.80948000064674,10.32118500253649},{44.80943250063662,10.321233127496857},{44.809385000606305,10.321281252377958},{44.809337500555785,10.321329377179792},{44.80929000048504,10.321377501902361},{44.8092425003941,10.321425626545665},{44.809195000282934,10.321473751109709},{44.80914750015158,10.321521875594486},{44.8091,10.32157},{44.8091,10.32157},{44.809110625459056,10.321653749768583},{44.809121250856904,10.321737499568021},{44.80913187619355,10.321821249398317},{44.80914250146898,10.321904999259468},{44.809153126683206,10.321988749151476},{44.80916375183623,10.32207249907434},{44.80917437692804,10.322156249028058},{44.809185001958646,10.322239999012632},{44.80919562692804,10.32232374902806},{44.80920625183623,10.322407499074345},{44.80921687668321,10.322491249151485},{44.80922750146898,10.322574999259478},{44.80923812619355,10.322658749398329},{44.80924875085691,10.322742499568031},{44.80925937545906,10.322826249768589},{44.80927,10.32291},{44.80927375030543,10.323009999954486},{44.80927750052359,10.323109999921979},{44.80928125065448,10.323209999902476},{44.80928500069812,10.323309999895974},{44.80928875065448,10.323409999902479},{44.80929250052359,10.323509999921983},{44.80929625030542,10.323609999954492},{44.8093,10.32371},{44.80928875050827,10.323798125257822},{44.809277500948774,10.32388625048127},{44.80926625132151,10.323974375670343},{44.809255001626475,10.324062500825038},{44.80924375186366,10.324150625945359},{44.80923250203309,10.324238751031302},{44.80922125213474,10.324326876082871},{44.80921000216863,10.324415001100059},{44.80919875213475,10.324503126082872},{44.80918750203308,10.32459125103131},{44.809176251863654,10.324679375945369},{44.80916500162647,10.32476750082505},{44.8091537513215,10.324855625670356},{44.80914250094877,10.32494375048128},{44.809131250508266,10.32503187525783},{44.80912,10.32512},{44.80912,10.32512},{44.809110000189406,10.325198750095572},{44.8091000003247,10.325277500163839},{44.80909000040588,10.325356250204797},{44.80908000043294,10.325435000218452},{44.809070000405875,10.325513750204799},{44.8090600003247,10.325592500163838},{44.809050000189416,10.325671250095573},{44.80904,10.32575},{44.80904,10.32575},{44.80902500014432,10.325855000081917},{44.80901000019241,10.325960000109225},{44.8089950001443,10.32606500008192},{44.80898,10.32617},{44.80891,10.32622},{44.8089,10.32628},{44.80896,10.32636},{44.80893000293806,10.326571876652945},{44.808900005484375,10.32678375308551},{44.80887000763896,10.32699562929769},{44.808840009401784,10.327207505289485},{44.80881001077287,10.32741938106089},{44.808780011752205,10.327631256611904},{44.80875001233981,10.327843131942526},{44.808720012535666,10.32805500705275},{44.80869001233978,10.328266881942579},{44.80866001175217,10.328478756612004},{44.808630010772816,10.328690631061027},{44.80860000940172,10.328902505289642},{44.8085700076389,10.32911437929785},{44.80854000548433,10.329326253085647},{44.808510002938036,10.329538126653032},{44.80848,10.32975},{44.80848,10.32975},{44.80843,10.32973},{44.80843,10.32973},{44.80836,10.32976},{44.80829875002105,10.32973374980488},{44.808237500036086,10.329707499665508},{44.8081762500451,10.329681249581885},{44.80811500004811,10.32965499955401},{44.80805375004509,10.329628749581886},{44.80799250003607,10.32960249966551},{44.80793125002104,10.329576249804878},{44.80787,10.32955},{44.80790382090899,10.32989501953125}]] ),




% Second Route
	SVM2 = class_Actor:create_initial_actor( class_Route,
		[ _RouteaName2="Route 2", _Route2=[
{44.80790382090899,10.32989501953125},{44.80787,10.32955},{44.80793125002104,10.329576249804878},{44.80799250003607,10.32960249966551},{44.80805375004509,10.329628749581886},{44.80811500004811,10.32965499955401},{44.8081762500451,10.329681249581885},{44.808237500036086,10.329707499665508},{44.80829875002105,10.32973374980488},{44.80836,10.32976},{44.80843,10.32973},{44.80843,10.32973},{44.80848,10.32975},{44.80848,10.32975},{44.808510002938036,10.329538126653032},{44.80854000548433,10.329326253085647},{44.8085700076389,10.32911437929785},{44.80860000940172,10.328902505289642},{44.808630010772816,10.328690631061027},{44.80866001175217,10.328478756612004},{44.80869001233978,10.328266881942579},{44.808720012535666,10.32805500705275},{44.80875001233981,10.327843131942526},{44.808780011752205,10.327631256611904},{44.80881001077287,10.32741938106089},{44.808840009401784,10.327207505289485},{44.80887000763896,10.32699562929769},{44.808900005484375,10.32678375308551},{44.80893000293806,10.326571876652945},{44.80896,10.32636},{44.8089,10.32628},{44.80891,10.32622},{44.80898,10.32617},{44.8089950001443,10.32606500008192},{44.80901000019241,10.325960000109225},{44.80902500014432,10.325855000081917},{44.80904,10.32575},{44.80904,10.32575},{44.809050000189416,10.325671250095573},{44.8090600003247,10.325592500163838},{44.809070000405875,10.325513750204799},{44.80908000043294,10.325435000218452},{44.80909000040588,10.325356250204797},{44.8091000003247,10.325277500163839},{44.809110000189406,10.325198750095572},{44.80912,10.32512},{44.80912,10.32512},{44.809131250508266,10.32503187525783},{44.80914250094877,10.32494375048128},{44.8091537513215,10.324855625670356},{44.80916500162647,10.32476750082505},{44.809176251863654,10.324679375945369},{44.80918750203308,10.32459125103131},{44.80919875213475,10.324503126082872},{44.80921000216863,10.324415001100059},{44.80922125213474,10.324326876082871},{44.80923250203309,10.324238751031302},{44.80924375186366,10.324150625945359},{44.809255001626475,10.324062500825038},{44.80926625132151,10.323974375670343},{44.809277500948774,10.32388625048127},{44.80928875050827,10.323798125257822},{44.8093,10.32371},{44.80929625030542,10.323609999954492},{44.80929250052359,10.323509999921983},{44.80928875065448,10.323409999902479},{44.80928500069812,10.323309999895974},{44.80928125065448,10.323209999902476},{44.80927750052359,10.323109999921979},{44.80927375030543,10.323009999954486},{44.80927,10.32291},{44.80925937545906,10.322826249768589},{44.80924875085691,10.322742499568031},{44.80923812619355,10.322658749398329},{44.80922750146898,10.322574999259478},{44.80921687668321,10.322491249151485},{44.80920625183623,10.322407499074345},{44.80919562692804,10.32232374902806},{44.809185001958646,10.322239999012632},{44.80917437692804,10.322156249028058},{44.80916375183623,10.32207249907434},{44.809153126683206,10.321988749151476},{44.80914250146898,10.321904999259468},{44.80913187619355,10.321821249398317},{44.809121250856904,10.321737499568021},{44.809110625459056,10.321653749768583},{44.8091,10.32157},{44.8091,10.32157},{44.80914750015158,10.321521875594486},{44.809195000282934,10.321473751109709},{44.8092425003941,10.321425626545665},{44.80929000048504,10.321377501902361},{44.809337500555785,10.321329377179792},{44.809385000606305,10.321281252377958},{44.80943250063662,10.321233127496857},{44.80948000064674,10.32118500253649},{44.809527500636634,10.321136877496862},{44.80957500060631,10.321088752377964},{44.80962250055579,10.321040627179801},{44.809670000485056,10.320992501902374},{44.8097175003941,10.32094437654568},{44.809765000282944,10.320896251109719},{44.80981250015158,10.320848125594491},{44.80986,10.3208},{44.80986,10.3208},{44.80996375069602,10.320696877782558},{44.81006750129924,10.320593755194121},{44.810171251809656,10.320490632234684},{44.810275002227264,10.320387508904247},{44.810378752552076,10.320284385202804},{44.81048250278409,10.320181261130354},{44.8105862529233,10.320078136686899},{44.810690002969714,10.319975011872428},{44.81079375292332,10.319871886686947},{44.810897502784115,10.31976876113045},{44.811001252552124,10.319665635202933},{44.81110500222731,10.319562508904395},{44.8112087518097,10.319459382234836},{44.81131250129927,10.319356255194254},{44.81141625069604,10.319253127782643},{44.81152,10.31915},{44.81152,10.31915},{44.81156875455283,10.318886253344209},{44.81161750849862,10.318622506242507},{44.81166626183737,10.318358758694892},{44.81171501456908,10.318095010701374},{44.81176376669375,10.317831262261954},{44.81181251821138,10.317567513376638},{44.81186126912198,10.317303764045427},{44.81191001942553,10.317040014268327},{44.81195876912203,10.316776264045345},{44.812007518211466,10.316512513376479},{44.81205626669387,10.316248762261736},{44.81210501456921,10.315985010701118},{44.81215376183751,10.315721258694632},{44.812202508498736,10.31545750624228},{44.8122512545529,10.31519375334407},{44.8123,10.31493},{44.8123,10.31493},{44.81239625000656,10.314939999749663},{44.812492500012226,10.3149499995327},{44.81258875001703,10.314959999349117},{44.812685000020956,10.31496999919891},{44.81278125002401,10.314979999082082},{44.812877500026175,10.314989998998632},{44.81297375002749,10.314999998948561},{44.81307000002793,10.31500999893187},{44.81316625002748,10.315019998948559},{44.81326250002618,10.315029998998625},{44.813358750023994,10.315039999082071},{44.813455000020944,10.315049999198896},{44.813551250017014,10.315059999349101},{44.813647500012216,10.315069999532689},{44.813743750006545,10.315079999749655},{44.81384,10.31509},{44.81384,10.31509},{44.81391625010995,10.315030000555325},{44.81399250018848,10.314970000951986},{44.81406875023561,10.314910001189986},{44.81414500025132,10.314850001269319},{44.81422125023561,10.314790001189989},{44.814297500188495,10.314730000951991},{44.81437375010995,10.31467000055533},{44.81445,10.31461},{44.81445,10.31461},{44.814483750061854,10.314565000184352},{44.81451750010603,10.314520000316033},{44.81455125013253,10.314475000395042},{44.81458500014136,10.314430000421378},{44.81461875013253,10.314385000395042},{44.81465250010603,10.314340000316031},{44.814686250061854,10.314295000184352},{44.81472,10.31425},{44.81472,10.31425},{44.814740000073634,10.314175000078034},{44.814760000098175,10.314100000104043},{44.814780000073625,10.314025000078033},{44.8148,10.31395},{44.81481000015126,10.313842500055925},{44.814820000201685,10.313735000074567},{44.81483000015127,10.313627500055924},{44.81484,10.31352},{44.814805004927095,10.313245622502226},{44.81477000919723,10.31297124533746},{44.81473501281043,10.312696868505714},{44.81470001576667,10.312422492006988},{44.81466501806595,10.31214811584129},{44.8146300197083,10.311873740008627},{44.814595020693694,10.311599364508998},{44.814560021022146,10.311324989342419},{44.814525020693665,10.311050614508888},{44.81449001970823,10.310776240008408},{44.81445501806587,10.310501865840992},{44.81442001576656,10.31022749200664},{44.81438501281033,10.30995311850536},{44.81435000919715,10.309678745337155},{44.81431500492704,10.309404372502033},{44.81428,10.30913},{44.81428125019547,10.30905000001214},{44.81428250033509,10.30897000002081},{44.814283750418866,10.308890000026013},{44.814285000446795,10.308810000027748},{44.814286250418874,10.308730000026012},{44.8142875003351,10.308650000020812},{44.81428875019547,10.308570000012143},{44.81429,10.30849},{44.81424,10.30845},{44.81421,10.30834},{44.81423500001843,10.308275000028178},{44.81426,10.30821},{44.81424625016053,10.308137499879},{44.8142325002752,10.308064999792567},{44.814218750344004,10.307992499740708},{44.81420500036694,10.307919999723422},{44.814191250344,10.307847499740708},{44.8141775002752,10.307774999792567},{44.81416375016054,10.307702499878998},{44.81415,10.30763},{44.81414750215008,10.30744874988217},{44.81414500401349,10.30726749978004},{44.81414250559022,10.307086249693619},{44.81414000688028,10.3069049996229},{44.81413750788365,10.306723749567889},{44.814135008600346,10.30654249952859},{44.814132509030365,10.306361249505},{44.814130009173695,10.306179999497125},{44.81412750903036,10.305998749504965},{44.81412500860035,10.305817499528517},{44.81412250788365,10.30563624956779},{44.81412000688027,10.305454999622786},{44.81411750559022,10.305273749693503},{44.814115004013495,10.30509249977994},{44.81411250215008,10.304911249882105},{44.81411,10.30473},{44.81411687542545,10.304649375144178},{44.81412375079416,10.304568750269132},{44.81413062610615,10.30448812537486},{44.81413750136141,10.304407500461366},{44.81414437655994,10.30432687552865},{44.81415125170175,10.304246250576705},{44.81415812678686,10.30416562560554},{44.81416500181521,10.304085000615151},{44.81417187678685,10.304004375605537},{44.81417875170176,10.3039237505767},{44.814185626559954,10.30384312552864},{44.81419250136141,10.303762500461357},{44.814199376106146,10.303681875374851},{44.81420625079416,10.303601250269123},{44.81421312542545,10.30352062514417},{44.81422,10.30344},{44.81423562550109,10.30335250035562},{44.81425125093537,10.303265000663822},{44.81426687630283,10.30317750092461},{44.81428250160348,10.30309000113798},{44.81429812683733,10.303002501303935},{44.81431375200435,10.302915001422473},{44.81432937710457,10.302827501493596},{44.81434500213798,10.3027400015173},{44.81436062710458,10.302652501493592},{44.81437625200436,10.302565001422465},{44.81439187683733,10.302477501303924},{44.81440750160348,10.302390001137969},{44.814423126302835,10.302302500924599},{44.81443875093537,10.302215000663812},{44.81445437550109,10.302127500355615},{44.81447,10.30204},{44.81442,10.30204},{44.81437,10.30196},{44.81437,10.30188},{44.81443,10.30181},{44.8144100000688,10.301737499924569},{44.81439000009173,10.301664999899424},{44.8143700000688,10.301592499924569},{44.81435,10.30152},{44.81434750016612,10.301446249977621},{44.814345000284774,10.301372499961635},{44.81434250035598,10.301298749952045},{44.8143400003797,10.301224999948847},{44.81433750035597,10.301151249952044},{44.81433500028477,10.301077499961636},{44.81433250016612,10.301003749977623},{44.81433,10.30093},{44.81433687550108,10.300842500156474},{44.81434375093536,10.300755000292083},{44.81435062630282,10.300667500406831},{44.81435750160348,10.300580000500714},{44.814364376837325,10.300492500573736},{44.81437125200435,10.300405000625892},{44.81437812710457,10.300317500657185},{44.81438500213798,10.300230000667613},{44.81439187710457,10.300142500657179},{44.81439875200435,10.300055000625882},{44.81440562683732,10.299967500573722},{44.81441250160349,10.299880000500703},{44.81441937630284,10.29979250040682},{44.81442625093538,10.299705000292077},{44.81443312550109,10.299617500156469},{44.81444,10.29953},{44.81445375011457,10.299468750102228},{44.81446750019642,10.29940750017525},{44.814481250245535,10.299346250219061},{44.8144950002619,10.299285000233665},{44.81450875024553,10.299223750219062},{44.81452250019642,10.299162500175246},{44.81453625011457,10.299101250102225},{44.81455,10.29904},{44.81459000015505,10.29896875034595},{44.8146300002658,10.298897500593055},{44.81467000033225,10.29882625074132},{44.814710000354395,10.298755000790742},{44.81475000033224,10.298683750741322},{44.81479000026579,10.298612500593057},{44.81483000015505,10.298541250345952},{44.81487,10.29847},{44.814908750147666,10.298422500478774},{44.81494750027564,10.29837500089371},{44.81498625038394,10.298327501244811},{44.81502500047253,10.298280001532078},{44.81506375054144,10.298232501755509},{44.81510250059066,10.298185001915101},{44.8151412506202,10.298137502010857},{44.81518000063004,10.298090002042775},{44.8152187506202,10.298042502010858},{44.81525750059066,10.297995001915107},{44.81529625054144,10.297947501755514},{44.81533500047253,10.297900001532087},{44.81537375038393,10.29785250124482},{44.81541250027564,10.297805000893717},{44.81545125014767,10.297757500478776},{44.81549,10.29771},{44.815525000052794,10.297600000066764},{44.81556,10.29749},{44.81556250012905,10.297425000019727},{44.81556500022122,10.297360000033816},{44.81556750027652,10.29729500004227},{44.81557000029495,10.297230000045086},{44.81557250027652,10.297165000042268},{44.815575000221216,10.297100000033815},{44.815577500129045,10.297035000019726},{44.81558,10.29697},{44.81562500000042,10.296979999992198},{44.81567,10.29699},{44.81573000000393,10.296960000031214},{44.81579,10.29693},{44.815815000018425,10.296865000028179},{44.81584,10.2968},{44.81584,10.2968},{44.81597562512887,10.296844373434467},{44.81611125024056,10.296888747077666},{44.81624687533506,10.296933120929594},{44.816382500412395,10.296977494990252},{44.81651812547255,10.297021869259645},{44.816653750515506,10.297066243737776},{44.816789375541276,10.297110618424643},{44.81692500054987,10.297154993320252},{44.81706062554129,10.297199368424604},{44.817196250515515,10.297243743737697},{44.81733187547256,10.29728811925954},{44.81746750041242,10.297332494990128},{44.8176031253351,10.297376870929465},{44.81773875024058,10.297421247077557},{44.81787437512889,10.2974656234344},{44.81801,10.29751},{44.81813320670734,10.296764373779297}]] ),




	_Car1 = class_Actor:create_initial_actor( class_Car,
		[ _CarName="car_1", 
		  _Position=0.0,
		  _Index=1,
 		  _CarSpeed=1.0, 
		  _KnowRoutePID=SVM1 ]),

	_Car2 = class_Actor:create_initial_actor( class_Car,
		[ _CarName2="car_2", 
		  _Position2=0.0,
		  _Index2=1,
 		  _CarSpeed2=1.0, 
		  _KnowRoutePID2=SVM2 ]),

	% We want this test to end once a specified virtual duration elapsed, in
	% seconds:
	SimulationDuration = 4000,

	DeploymentManagerPid ! { getRootTimeManager, [], self() },
	RootTimeManagerPid = test_receive(),

	?test_info_fmt( "Starting simulation, for a stop after a duration "
					"in virtual time of ~Bms.", [ SimulationDuration ] ),

	RootTimeManagerPid ! { startFor, [ SimulationDuration, self() ] },

	?test_info( "Waiting for the simulation to end, "
				"since having been declared as a simulation listener." ),

	receive

		simulation_stopped ->
			?test_info( "Simulation stopped spontaneously, "
						"specified stop tick must have been reached." )

	end,

	?test_info( "Browsing the report results, if in batch mode." ),
	class_ResultManager:browse_reports(),

	sim_diasca:shutdown(),

	?test_stop.
